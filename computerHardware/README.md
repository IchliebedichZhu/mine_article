# 计算机系统体系结构

  计算机体系结构是程序员所看到的计算机属性，包括计算机的逻辑结构和功能特征，硬软件之间的关系，设计思想与体系结构。

* 计算机体系结构分类

**按处理机数分类**

1. 单处理系统
2. 并行处理与多处理系统
3. 分布式处理系统

**按并行程度分**

1. flynn分类法（根据指令流数据流分类）：单指令流单数据流SISD，单指令多数据流SIMD，多指令单数据MISD，多指令多数据MIMD   
2. 冯泽云分类法：根据计算机系统在单位时间内能够处理的最大二进制位数分类（字串位串，字并位串，字串位并，字并位并）  
3. Handle分类法：基于硬件并行程度的计算方法。
4. kuck分类法：根据指令流，执行流的多少进行分类。

  * 冯诺伊曼机

计算机硬件系统遵循冯诺伊曼机设计的体系结构，由运算器，存储器，寄存器，输入设备和输出设备组成。   
运算器，控制器，寄存器组成CPU。   
控制器由指令寄存器(IR)，程序计数器(PC)，地址寄存器(AR)，数据寄存器(DR)，指令译码器等组成    
运算器由算数算数逻辑单元(ALU)，通用寄存器等组成   


## 指令系统

指令：计算机可以识别和执行的命令。   
微操作：执行指令时，每个不见完成的基本操作。   
指令系统： 计算机系统中可执行的指令集合。

  * 指令格式

指令由操作码和地址码组成。由零地址指令，单地址指令，等等   
操作码：表示指令的操作性质及功能。可分为定长编码，变长编码。   
地址码：指出指令的操作数据。   

* 寻址方式

1. 立即寻址：指令中直接给出操作码
2. 直接寻址：指令中给出的是操作码地址或所在寄存器地址
3. 间接寻址：给出的是操作码地址的地址。
4. 变址寻址：给出的地址，需与特定的地址值相加，得到操作码地址。

  * CISC 和 RISC指令集

**CISC 复杂指令集计算机**

指令数目多。   
指令为可变长的指令。   
指令控制器复杂。   
有较丰富的寻址方式提供给用户。   
编程相对容易，因为其可用的指令多，编程方式比较灵活。

**RISC 精简指令集计算机**

指令数目少。   
指令格式规整。   
指令控制器简单。   
寻址方式使用尽可能少的寻址方式简化实现逻辑，提高效率。   
实现与CISC相同的功能一般编程量更大。

**RISC 流水线结构**

1. 超流水线技术：增加流水线级数。
2. 超标量技术： 采用多条流水线同时执行。
3. 超长指令字：将多条指令连在一起执行，以增加运算速度。

## CPU结构

中央处理单元(CPU)由运算器，控制器，寄存器组和内部总线等构成

  * CPU指令的执行过程

1. 取指令
2. 取操作数
3. 执行操作

**指令周期**: 完成一条指令所需的时间（取指令，分析指令，执行指令所花费的时间）   
**机器周期**: 每个阶段所需的时间。   
**时钟周期**: 时钟频率的倒数。   

指令周期由若干个机器周期组成，每个机器周期由若干个时钟周期组成。   

**总线周期**: CPU从存储器或I/O端口存期一字节所需的时间

  * CPU的主要性能指标

主频(时钟频率): CPU运算和处理数据的速度。   
字长: CPU单位时间内能一次处理二进制数的位数。   
缓存: CPU与主存之间的高速存储器，速度接近CPU。   

  * 流水线

流水线: 将指令分解为多个小步骤，并让若干条不同指令的各个操作步骤重叠，从而实现若干条指令的并行处理，达到程序加速运行的目的。   
流水线执行的总时间主要取决于流水线步骤中最长时间的那段操作。


  * 流水线的性能指标

吞吐率: 单位时间内可以处理的任务数(指令数)。    
加速比: 串行模式的工作速度/流水线模式的工作速度。   
效率: 流水线各段处于工作时间的时空区/流水线中各段总的时空区。   


# 存储系统

## 存储系统基础

**按存储应用分类**

  主存储器(随机存储器，只读存储器)   
    只读存储器：MROM，PROM，EPROM，E^2PROM   
  快擦型存储器 Flash Memory   
  辅存   
  Cache   

**按数据的存取方式分类**

  随机存取存储器(RAM): CPU可以对存储器中的数据随机存储，与信息所处的物理位置无关。   
  只读存储器(ROM): 信息固定在存储器内，只可读出，不能修改。   
  顺序存取存储器(SAM): 只能按某种顺序存取，存取时间的长短与信息在存储体上的物理位置相关。   
  直接存取存储器(DAM): 当需要存取信息时，直接指向整个存储器中的某个范围，然后在这个范围内顺序检索，找到目的地后再进行读写操作。   
  相联存储器(CAM): 基于数据内容进行访问的存储设备。当写入数据时，CAM能够自动选择一个未使用的空单元进行储备；读出数据时，使用数据的一部分内容进行检索地址。   

**存储器相关计算**

  存储容量: 存储器存放数据的总位数。 = 存储单元数 * 单元的位数   
  存取时间: CPU给出有效的存储器地址启动一次存储器读写操作，到完成操作的总时间。   
  存取周期: 连续两次启动存储器所需的最小时间间隔.

**高速缓存**

  高速缓冲存储器(Cache): 把程序正在使用的部分放在一个高速缓存中，解决CPU与主存速度不匹配的问题，高速缓存速度与CPU相当。   

  映射策略:   
  1. 直接映像: 主存块只能存放在Cache的相同块中。   
  2. 全相联映像: 主存任何一块数据可以调入Cache的任一块中。   
  3. 组相联映像: 结合直接映像和全相联映像。   

## RAID

RAID: 独立磁盘冗余阵列，利用磁盘阵列控制器和一组磁盘组成一个可靠的，高速的，大容量的逻辑硬盘。

**RAID常见概念**

条带: 将连续数据分成若干个大小相同的数据块，将每块数据分别存入阵列中不同磁盘相同位置上的方法。   
条带长度: 一个横跨过的扇区或块的个数或者字节容量。条带长度 = 条带深度 * 条带经过的所有磁盘数。   
条带深度: 一个条带在单块磁盘上所占的区域(Segment)。条带深度就是一个Segment所包含数据块或者扇区的个数或者字节容量。   
 
# 参考文献

1. [网络操作系统，2019，机械工业出版社](https://item.jd.com/10313392215.html)
2. [软件设计师5天修炼](https://item.jd.com/13061244.html)